version: '3'

services:
  squid:
    image: docker.io/ubuntu/squid:latest
    depends_on:
    - nginx-proxy
    networks:
    - default
    - proxy
  nginx:
    image: docker.io/nginx:${CONFIG_VERSION}
    volumes:
    - ../data/:/etc/nginx:ro
    networks:
    - default
  nginx-proxy:
    image: docker.io/nginx:${CONFIG_VERSION}
    volumes:
    - ../data/:/etc/nginx:ro
    networks:
    - proxy

networks:
  default:
    name: ${VECTOR_NETWORK}
    external: true
  proxy: {}
