# Settings in the [build] context are global and are applied to
# all contexts unless otherwise overridden by more specific contexts.
[build]
  # Directory to change to before starting a build.
  # This is where we will build the site in web-playground/public.
  # If not set, defaults to the root directory.
  base = "lib/vrl/web-playground/"

  # Directory that contains the deploy-ready HTML files and
  # assets generated by the build.
  publish = "public/"

  # Default build command.
  command = "bash ../../../scripts/ensure-wasm-pack-installed.sh && wasm-pack build --target web --out-dir public"

  # Ignore everything except the base directory and changes to vector/lib/
  ignore = "git diff --quiet $CACHED_COMMIT_REF $COMMIT_REF . ../../../lib"
